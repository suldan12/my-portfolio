<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My portofolio</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/681d4582fd.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="./images/" type="image/x-icon">
    <!-- boxicons link -->
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        table, th, td {
            border:1px solid black;
        }
    </style>
</head>

<body>

    <button class="back-main"><a href="index.html">Back</a></button>
    <h1 class="text-center text-2xl font-bold py-4">MESSAGES</h1>
    <div class="flex justify-start items-center mt-7">

        <table class="container justify-center mx-auto">
            <thead>
                <th>Full Name</th>
                <th>Email</th>
                <th>message</th>
                <th>Action</th>
            </thead>
            <tbody></tbody>
        </table>

    </div>



    <!-- java Script section -->
    <script>
        getData(); 
        function getData() {
            const formDataString = localStorage.getItem('formData');
            if (formDataString) {
                const formData = JSON.parse(formDataString);
                const table = document.querySelector('.container tbody');
                table.innerHTML = ''; 
                formData.forEach(data => {
                    const { firstName, lastName, email, subject, message } = data;
                    let user = `<tr> <td>${firstName} ${lastName}</td> <td>${email}</td> <td>${message}</td> <td><i class="fa fa-trash text-center w-10 cursor-pointer" onclick="deleteRow(this)"></i></td> </tr>`;
                    table.innerHTML += user;
                });
            }
        }

        function deleteRow(row) {
            const rowIndex = row.parentNode.parentNode.rowIndex;
            let formData = JSON.parse(localStorage.getItem('formData'));
            formData.splice(rowIndex - 1, 1);
            localStorage.setItem('formData', JSON.stringify(formData));
            row.parentNode.parentNode.remove();
        }

    </script>

</body>
</html>